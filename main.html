<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>관리 페이지</title>
        
        <style>
			* {
				margin:0px;
				padding:0px;
			}
			html , body {
				height:100%;
				background-color:aliceblue;
			}
            #div_root{
                margin:auto;
                width:inherit;
            }
            #div_input{
                width:100%;
                height: 10%;
                padding-top: 5%;
                text-align:center;
                background-color:aliceblue;
            }
            #div_list{
                width: 100%;
                height: 80%;
                text-align: center;
                background-color:aliceblue;
            }
			table {
                width: 100%;
                border-top: 1px solid #444444;
                border-collapse: collapse;
            }
            th, td {
                border-bottom: 1px, solid #444444;
                padding: 10px;
                text-align: center;
            }
            thead tr {
                background-color:cornflowerblue;
                color: #ffffff;
            }
            tbody tr:nth-child(2n) {
                background-color:aliceblue;
            }
            tbody tr:nth-child(2n+1) {
                background-color: aquamarine;
            }
            tbody td:nth-child(2) {
                padding: 10px;
                text-align: left;
            }
			tfoot tr {
				background-color:#dddddd;
				color:#ffffff;
			}
        </style>
    </head>

	<script>
		function all_check(ck) {
			var ck_all=document.getElementsByName("check");
			if (ck.checked) {
				for ( var i=0; i < ck_all.length; i++) {
					ck_all[i].checked="true";
				}
			}
			else {
				for ( var i=0; i < ck_all.length; i++) {
					ck_all[i].checked="";
				}
			}
		}

		function remove_button(bt) {
			var rm = document.getElementsByName("check");
			if ( bt.click ) {
				for ( var i=0; i < rm.length; i++) {
					if ( rm[i].checked ) {
						alert(rm[i].value+" 제거 ㅎ싈?");
					}
				}
			}

		}

	</script>

    <body>
        <div id="div_input">
            <form action="http://183.101.242.171/web/upload.php" method="post" enctype="multipart/form-data">   
                <input type="file" name="upfile">
                <input type="submit">
            </form>
        </div>
        <div id="div_list">
            <?php
                $conn = mysqli_connect("localhost","eun","Abcd23@#","multiple");
                if(mysqli_connect_errno($conn)) {
                    echo "불러올 수 없습니다.";
                }
                mysqli_set_charset($conn,'utf8'); // 한글 문자 패치
				
				$candi = array(); // 기사 이름 배열 생성

				$candi_query = "select * from soongsil";
				$result_set = mysqli_query($conn, $candi_query);
				
				while($row = mysqli_fetch_array($result_set)){
					array_push($candi,$row["name"]);
				}
            ?>
            <table>
                <thead>
                    <tr><td><input type="checkbox" onchange="all_check(this);"></td><td colspan='2' >주소</td><td>분배</td></tr>
                </thead>
                <tbody>
                    <?php
						
                        $select_query = "SELECT * FROM soongsil_delivery";
                        $result_set = mysqli_query($conn, $select_query);
						$cnt_row = 1;
                        while($row = mysqli_fetch_array($result_set)){
							$address = $row["address"];
                            echo "<tr><td><input type='checkbox' name='check' value='check$cnt_row'></td><td>$address</td>
									<td><input type='button' value='수정'></td><td>";
							// 후보 select
                            echo "<select name='seltest'><option value='op0' selected> </option>";
                            $cnt = 0;
                            while($cnt != count($candi)) {
                                echo "<option value='op$cnt'>$candi[$cnt]</option>";
                                $cnt++;
                            }
							$cnt_row++;
                            echo "</select></td></tr>";
                            echo '<br>';
                        }
                        mysqli_close($conn);
                    ?>
				</tbody>
				
				<tfoot>
					<tr><td><input type="button" value="삭제" onclick="remove_button(this);"></td><td> </td>
						<td> </td><td><input type="button" value="분배완료"</td></tr>
                </tfoot>
            </table>
        </div>
    </body>
</html>
